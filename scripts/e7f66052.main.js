!function(a){"use strict";var b,c=a.Uint8Array,d=a.HTMLCanvasElement,e=d&&d.prototype,f=/\s*;\s*base64\s*(?:;|$)/i,g="toDataURL",h=function(a){for(var d,e,f,g=a.length,h=new c(g/4*3|0),i=0,j=0,k=[0,0],l=0,m=0;g--;)e=a.charCodeAt(i++),d=b[e-43],255!==d&&d!==f&&(k[1]=k[0],k[0]=e,m=m<<6|d,l++,4===l&&(h[j++]=m>>>16,61!==k[1]&&(h[j++]=m>>>8),61!==k[0]&&(h[j++]=m),l=0));return h};c&&(b=new c([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51])),d&&!e.toBlob&&(e.toBlob=function(a,b){if(b||(b="image/png"),this.mozGetAsFile)return void a(this.mozGetAsFile("canvas",b));if(this.msToBlob&&/^\s*image\/png\s*(?:$|;)/i.test(b))return void a(this.msToBlob());var d,e=Array.prototype.slice.call(arguments,1),i=this[g].apply(this,e),j=i.indexOf(","),k=i.substring(j+1),l=f.test(i.substring(0,j));Blob.fake?(d=new Blob,d.encoding=l?"base64":"URI",d.data=k,d.size=k.length):c&&(d=l?new Blob([h(k)],{type:b}):new Blob([decodeURIComponent(k)],{type:b})),a(d)},e.toBlobHD=e.toDataURLHD?function(){g="toDataURLHD";var a=this.toBlob();return g="toDataURL",a}:e.toBlob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this);var scifi={results:[{name:"TNG",start:"1987",end:"1994",category:"scifi"},{name:"Gene Roddenberry's Death",start:"1991",end:"1991",category:"scifi"},{name:"DS9",start:"1993",end:"1999",category:"scifi"},{name:"VOY",start:"1995",end:"2001",category:"scifi"},{name:"ENT",start:"2001",end:"2005",category:"scifi"},{name:"Stargate SG1",start:"1997",end:"2007",category:"scifi"},{name:"Stargate Atlantis",start:"2004",end:"2009",category:"scifi"},{name:"Stargate Universe",start:"2009",end:"2011",category:"scifi"},{name:"Farscape",start:"1999",end:"2003",category:"scifi"},{name:"ANDROMEDA ASCENDANT",start:"2000",end:"2005",category:"scifi"},{name:"Jeremiah",start:"2002",end:"2004",category:"scifi"},{name:"Battlestar Galactica (reimagined)",start:"2004",end:"2009",category:"scifi"},{name:"Fringe",start:"2008",end:"2013",category:"scifi"},{name:"Jehrico",start:"2006",end:"2009",category:"scifi"},{name:"Falling Skies",start:"2011",end:"2014",category:"scifi",onGoing:!0},{name:"Continuum",start:"2012",end:"2014",category:"scifi",onGoing:!0},{name:"Caprica",start:"2010",end:"2012",category:"scifi"},{name:"Blood & Chrome",start:"2012",end:"2013",category:"scifi"},{name:"Eureka",start:"2006",end:"2012",category:"scifi"},{name:"Defiance",start:"2013",end:"2014",category:"scifi",onGoing:!0},{name:"Futurama",start:"1999",end:"2014",category:"scifi",onGoing:!0},{name:"Dead Like Me",start:"2003",end:"2004",category:"scifi"},,{name:"Revolution",start:"2012",end:"2013",category:"scifi"},{name:"Alphas",start:"2011",end:"2012",category:"scifi"}]},Scifi=Parse.Object.extend({className:"Scifi"}),ScifiCollection=Parse.Collection.extend({model:Scifi,query:new Parse.Query(Scifi).equalTo("start","2009")}),PaperView=Parse.View.extend({tagName:"canvas",className:"myCanvas",attributes:{resize:!0},initialize:function(){paper.install(window),this.tester()},tester:function(){console.log(paper);new Path.Circle(new Point(100,100))}}),AppView=Parse.View.extend({tagName:"canvas",className:"myCanvas",initialize:function(){this.fetchData()},fetchData:function(){var a=new ScifiCollection;a.fetch({success:function(a){a.each(function(){console.log("Yeah, they're loaded dawg")})},error:function(a){alert("Error: "+a.code+" "+a.message)}}).then(function(){})},modifyEntireCollection:function(){var a=(Parse.Object.extend({className:"Scifi"}),new Scifi,new Parse.Query(Scifi));a.exists("objectId"),a.find({success:function(a){console.log("Successfully retrieved "+a.length+" results.");for(var b=0;b<a.length;b++){var c=a[b],d=c.get("start"),e=c.get("end"),f=parseInt(d),g=parseInt(e);c.set("range",g-f),c.save(null,{success:function(a){console.log("New object created with objectId: "+a.id)}})}},error:function(a){console.log("Error: "+a.code+" "+a.message)}})}}),AppRouter=Parse.Router.extend({routes:{"":"home"},home:function(){console.log("%cHello Kevin! \nThe router was sent home.\nEnjoy your stay!","color:rgba(0, 0, 0, .5)"),appView=new AppView}});Parse.initialize("kIv6nAYjGwfyFF9yozhchl8NC6jVcpViAvQZt8eU","iax0nms3DbkYo4YG7EjWqAtOWbrn1PDxl6k67rLa");var appView,scifi,paperView,inputDate,inputEvent;new AppRouter,Parse.history.start(),paper.install(window),window.onload=function(){paper.setup("myCanvas"),$(document).ready(function(){function a(){var a=new Rectangle(0,0,view.bounds.width,view.bounds.height),b=new Path.Rectangle(a);b.fillColor="#333333"}function b(){var a="rgba(200, 192, 62, 1)";star=new Path.Circle(new Point(view.center),100),star.style={fillColor:a,strokeColor:null};var b=star.position;console.log(b);var c=new Path.Circle(new Point(b),122),d=new Path.Circle(new Point(b+85),5);d.style={fillColor:a,strokeColor:null};var e=new Path.Circle(new Point(b),142),f=new Path.Circle(new Point(b+100),5);f.style={fillColor:a,strokeColor:null};var g=new Path.Circle(new Point(b),172),h=new Path.Circle(new Point(b+120),5);h.style={fillColor:a,strokeColor:null};var i=new Path.Circle(new Point(b),200),j=new Path.Circle(new Point(b+140),10);j.style={fillColor:a,strokeColor:null};var k=new Path.Circle(new Point(b),232),l=new Path.Circle(new Point(b+165),5);l.style={fillColor:a,strokeColor:null};var m=new Path.Circle(new Point(b),280),n=new Path.Circle(new Point(b+200),5);n.style={fillColor:a,strokeColor:null};var o=new Path.Circle(new Point(b),360),p=new Path.Circle(new Point(b+255),25);p.style={fillColor:a,strokeColor:null};var q=new Path.Circle(new Point(b),450),r=new Path.Circle(new Point(b+325),35);r.style={fillColor:a,strokeColor:null};var t=(c.center,c.center),u=new Group([c,d]),v=new Group([e,f]),w=new Group([g,h]),x=new Group([i,j]),y=new Group([k,l]),z=new Group([m,n]),A=new Group([o,p]),B=new Group([q,r]);view.onFrame=function(){u.rotate(3,t),v.rotate(2.5,t),w.rotate(2.1,t),x.rotate(1.8,t),y.rotate(1.4,t),z.rotate(1,t),A.rotate(.8,t),B.rotate(.6,t)},s===!0&&(project.activeLayer.onMouseDrag=function(a){star.visible=!1,t=a.point})}function c(a,b){this.startYearString=a,this.endYearString=b,this.startYear=parseInt(a),this.endYear=parseInt(b),this.dateRange=this.endYear-this.startYear}function d(a,b,c){this.eventName=a,this.eventStartString=b,this.eventEndString=c,this.eventStart=parseInt(b),this.eventEnd=parseInt(c),this.eventRange=this.eventEnd-this.eventStart}function e(){var a=inputDate.startYearString,b=inputDate.endYearString,c=inputDate.startYear,d=inputDate.endYear;switch(!0){case c>=d:g({message:"START YEAR should come before END YEAR.",add:$(".start-year"),remove:$(".end-year")});break;case""===a.trim():g({message:"Need START YEAR.",add:$(".start-year"),remove:$(".end-year")});break;case""===b.trim():g({message:"Need END YEAR.",add:$(".end-year"),remove:$(".start-year")});break;case 1e3>c:g({message:"Year needs to match YYYY",add:$(".start-year"),remove:$(".end-year")});break;case 1e3>d:g({message:"Year needs to match YYYY",add:$(".end-year"),remove:$(".start-year")});break;default:$(".input-dates, .input-events").addClass("activated"),t.visible=!1,console.log("default switch fired, you did real good there grasshopper"),h(),paper.view.draw(),l()}}function f(){var a=inputEvent.eventStartString,b=inputEvent.eventEndString,c=inputEvent.eventStart,d=inputEvent.eventName,e=inputEvent.eventEnd,f=inputDate.endYear;switch(!0){case""===d.trim():$(this).data("clickNum",u-=20),g({message:"Please enter a name of your new Event.",add:$(".event-name"),remove:$(".event-start, .event-end")});break;case 1e3>e:$(this).data("clickNum",u-=20),g({message:"END needs to match YYYY.",add:$(".event-end"),remove:$(".event-start, .event-name")});break;case""===a.trim():$(this).data("clickNum",u-=20),g({message:"Need event START year.",add:$(".event-start"),remove:$(".event-end, .event-name")});break;case""===b.trim():$(this).data("clickNum",u-=20),g({message:"Need event END year.",add:$(".event-end"),remove:$(".event-start, .event-name")});break;case e>f:$(this).data("clickNum",u-=20),g({message:"END should be before the graph's end year.",add:$(".event-end"),remove:$(".event-start, .event-name")});break;case 1e3>c:$(this).data("clickNum",u-=20),g({message:"START needs to match YYYY.",add:$(".event-start"),remove:$(".event-end, .event-name")});break;case c<inputDate.startYear:$(this).data("clickNum",u-=20),g({message:"START should be after the graph's start year.",add:$(".event-start"),remove:$(".event-end, .event-name")});break;case c>e:$(this).data("clickNum",u-=20),g({message:"START needs be before END",add:$(".event-start"),remove:$(".event-end, .event-name")});break;default:h(),p()}}function g(a){$(".notification-text").html(a.message).addClass("activated"),a.add.addClass("has-error"),a.remove.removeClass("has-error")}function h(){$(".notification-text").html("").removeClass("activated"),$(".has-error").removeClass("has-error")}function j(){u||(u=52),$(this).data("clickNum",u+=20)}function k(){v||(v=0),$(this).data("clickOne",v+=1),v===(v+1)/2>(x-80)/20&&($(".notification-text").html(v+" is the total number of points that this graph can display."),$(".add").prop("disabled",!0),$(".notification-text").addClass("activated"))}function l(){var a=inputDate.dateRange;C.add([z,y+50]);for(var b=1;a>b;b++){var c=new Point(w/a*b,y+50);C.add(c)}C.add([A,y+50]),D.add([z,B-50]);for(var b=1;a>b;b++){var c=new Point(w/a*b,B-50);D.add(c)}D.add([A,B-50]),guidePathLayer=new Layer([D,C]),paper.view.draw(),m()}function m(){for(var a=inputDate.startYear,b=inputDate.dateRange,c=a,d=1;b>d;d++){var e=new PointText({point:[w/b*d,y+8],content:c+=1,fillColor:"white"});e.rotate(300),e.position.x-=14,e.position.y+=25}for(var c=a,d=1;b>d;d++){var e=new PointText({point:[w/b*d,B-50],content:c+=1,fillColor:"white"});e.rotate(300),e.position.x-=14,e.position.y+=25}guideTextLayer=new Layer([e]),paper.view.draw(),n()}function n(){for(var a=inputDate.dateRange,b=1;a>b;b++){var c=new Point(w/a*b,y+52),d=new Point(w/a*b,B-52),e=new Path.Line(c,d);e.style=E,e.strokeColor="black"}referencePathsLayer=new Layer(e),paper.view.draw()}function o(){var a=inputEvent.eventName,b=new PointText(5,B-u+1);b.content=a,b.fillColor="white",b.position.y+=14,eventNameLayerBG=new Layer;var c=new Rectangle(new Point(0,B-u),new Size(b.bounds.width+7,20)),d=new Path.Rectangle(c);d.fillColor="#333333",d.blendMode="hard-light",eventNameLayerBG.activate();var e=new Path;e.add(new Point(b.bounds.width,B-u)+10),e.add(new Point(A,B-u)+10),e.fillColor="white",e.strokeColor=[.5],e.strokeWidth=1,e.dashArray=[5,5],e.blendMode="hard-light",eventNameLayer=new Layer(b),paper.view.draw()}function p(){var a=inputEvent.eventRange,b=inputEvent.eventStart,c=inputDate.dateRange,d=inputDate.startYear;if(1>a){var e=new Path.Circle({center:[w/c*(b-d),B-u+10],radius:10});e.fillColor={hue:360*Math.random(),saturation:.5,brightness:1},eventRectLayer=new Layer(e),paper.view.draw(),o()}else{var e=new Rectangle(new Point(w/c*(b-d),B-u),new Size(w/c*a,20)),f=new Path.Rectangle(e);f.fillColor={hue:360*Math.random(),saturation:1,brightness:1},eventRectLayer=new Layer(f),paper.view.draw(),o()}}console.log("ready!"),paper.install(window);var q=document.getElementById("myCanvas");paper.setup(q);var r=new PointText({point:view.center,justification:"center",fontSize:20,content:"\nTIMELINE CREATION TOOL\n\nInput a START YEAR\nand an END YEAR.\n",fillColor:{hue:360*Math.random(),saturation:.5,brightness:1},onMouseDown:function(){r.fillColor={hue:360*Math.random(),saturation:1,brightness:1}},onMouseMove:function(){r.fillColor.hue+=1}});a();var s=!1,t=new Layer([r]);r.fitBounds(view.bounds),paper.view.draw(),t.activate();var u=72,v=0,w=view.size.width,x=view.size.height,y=(view.center,view.bounds.top),z=view.bounds.left,A=view.bounds.right,B=view.bounds.bottom,C=(new Path({strokeColor:"#d9534f",strokeWidth:3}),new Path({strokeColor:"#d9534f",strokeWidth:3})),D=new Path({strokeColor:"#d9534f",strokeWidth:3}),E={strokeColor:[.3],strokeWidth:2,fontSize:20};$(".go").click(function(){project.clear();var a=$(".startYear").val(),b=$(".endYear").val();inputDate=new c(a,b),e()}),$(".add").click(function(){var a=$(".event-name-input").val(),b=$(".event-start-input").val(),c=$(".event-end-input").val();inputEvent=new d(a,b,c),f(),j(),k(),console.log("clickOne:",v,", clickNum:",u),v===(view.size.height-104)/20&&($(".notification-text").html(v+" is the total number of points that this graph can display."),$(".add").prop("disabled",!0),$(".notification-text").addClass("activated"))}),$(".scifi").click(function(){project.clear(),a(),paper.view.draw(),s=!1;$(".startYear").val("1986"),$(".endYear").val("2014");for($(".go").click(),i=0;i<scifi.results.length;i++){{$(".event-name-input").val(scifi.results[i].name),$(".event-start-input").val(scifi.results[i].start),$(".event-end-input").val(scifi.results[i].end)}$(".add").click()}paper.view.draw()}),$(".orbit").click(function(){project.clear(),a(),s=!0,b(),paper.view.draw()})})},$(".navbar-brand").click(function(){window.location.reload()}),$(".scifi").click(function(){$(".navbar-toggle").click()}),$(".orbit").click(function(){paper.project.clear(),$(".navbar-toggle").click(),$(".orbitCanvasClass").removeClass("activated")}),$(".save").click(function(){myCanvas.toBlob(function(a){saveAs(a,"pretty image.png")})}),setTimeout(function(){},500),WebFontConfig={google:{families:["Lato:300,400,700:latin"]}},function(){var a=document.createElement("script");a.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",a.type="text/javascript",a.async="true";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}();